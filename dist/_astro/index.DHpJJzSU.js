import{i as g,a as A,c as U,_,d as P,j as V}from"./utils.BHyOaGWp.js";import{r as c}from"./index.CWrl8SxZ.js";function j(n,e=globalThis?.document){const t=g(n);c.useEffect(()=>{const s=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)},[t,e])}const D="dismissableLayer.update",K="dismissableLayer.pointerDownOutside",z="dismissableLayer.focusOutside";let L;const H=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Q=c.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:b,onInteractOutside:u,onDismiss:f,...l}=n,o=c.useContext(H),[r,E]=c.useState(null),v=(t=r?.ownerDocument)!==null&&t!==void 0?t:globalThis?.document,[,m]=c.useState({}),h=A(e,d=>E(d)),y=Array.from(o.layers),[W]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),N=y.indexOf(W),C=r?y.indexOf(r):-1,B=o.layersWithOutsidePointerEventsDisabled.size>0,w=C>=N,S=X(d=>{const $=d.target,p=[...o.branches].some(O=>O.contains($));!w||p||(a?.(d),u?.(d),d.defaultPrevented||f?.())},v),T=q(d=>{const $=d.target;[...o.branches].some(O=>O.contains($))||(b?.(d),u?.(d),d.defaultPrevented||f?.())},v);return j(d=>{C===o.layers.size-1&&(i?.(d),!d.defaultPrevented&&f&&(d.preventDefault(),f()))},v),c.useEffect(()=>{if(r)return s&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(L=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(r)),o.layers.add(r),x(),()=>{s&&o.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=L)}},[r,v,s,o]),c.useEffect(()=>()=>{r&&(o.layers.delete(r),o.layersWithOutsidePointerEventsDisabled.delete(r),x())},[r,o]),c.useEffect(()=>{const d=()=>m({});return document.addEventListener(D,d),()=>document.removeEventListener(D,d)},[]),c.createElement(U.div,_({},l,{ref:h,style:{pointerEvents:B?w?"auto":"none":void 0,...n.style},onFocusCapture:P(n.onFocusCapture,T.onFocusCapture),onBlurCapture:P(n.onBlurCapture,T.onBlurCapture),onPointerDownCapture:P(n.onPointerDownCapture,S.onPointerDownCapture)}))});function X(n,e=globalThis?.document){const t=g(n),s=c.useRef(!1),i=c.useRef(()=>{});return c.useEffect(()=>{const a=u=>{if(u.target&&!s.current){let l=function(){I(K,t,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);s.current=!1},b=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(b),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function q(n,e=globalThis?.document){const t=g(n),s=c.useRef(!1);return c.useEffect(()=>{const i=a=>{a.target&&!s.current&&I(z,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function x(){const n=new CustomEvent(D);document.dispatchEvent(n)}function I(n,e,t,{discrete:s}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?V(i,a):i.dispatchEvent(a)}function R(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=R(n[e]))&&(s&&(s+=" "),s+=t);else for(e in n)n[e]&&(s&&(s+=" "),s+=e);return s}function G(){for(var n,e,t=0,s="";t<arguments.length;)(n=arguments[t++])&&(e=R(n))&&(s&&(s+=" "),s+=e);return s}const F=n=>typeof n=="boolean"?"".concat(n):n===0?"0":n,k=G,Y=(n,e)=>t=>{var s;if(e?.variants==null)return k(n,t?.class,t?.className);const{variants:i,defaultVariants:a}=e,b=Object.keys(i).map(l=>{const o=t?.[l],r=a?.[l];if(o===null)return null;const E=F(o)||F(r);return i[l][E]}),u=t&&Object.entries(t).reduce((l,o)=>{let[r,E]=o;return E===void 0||(l[r]=E),l},{}),f=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((l,o)=>{let{class:r,className:E,...v}=o;return Object.entries(v).every(m=>{let[h,y]=m;return Array.isArray(y)?y.includes({...a,...u}[h]):{...a,...u}[h]===y})?[...l,r,E]:l},[]);return k(n,b,f,t?.class,t?.className)};export{Q as $,Y as c};
